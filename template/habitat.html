<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
    <title>Habitats</title>
    <link rel="stylesheet"  href="/assets/style.css">>
</head>

<header> 
    <h1>Exploration nos  Habitats</h1>

</header>

<!-- Marais -->
<div class="habitat">
    <h2>Marais</h2>
    <div class="animal-card" id="animal-marais-1" onclick="incrementCounter('marais', '1')">
        <img src="/assets/image/frogmarais.webp" alt="Grenouille des Marais">
        <p>Nom: Grenouille des Marais</p>
        <p>Race: Grenouille</p>
        <p>Habitat: Marais</p>
        <p>Consultations: <span id="counter-marais-1">0</span></p>
        <p><strong>Avis du Vétérinaire :</strong> <span id="avis-marais-1">Aucun avis disponible</span></p>
    </div>
    </div>
    <div class="animal-card" id="animal-marais-2" onclick="incrementCounter('marais', '2')">
        <img src="/assets/image/flamingosmarais.jpg" alt="Flamants des Marais">
        <p>Nom: Flamants des Marais</p>
        <p>Race: Flamant</p>
        <p>Habitat: Marais</p>
        <p>Consultations: <span id="counter-marais-2">0</span></p>
        <p><strong>Avis du Vétérinaire :</strong> <span id="avis-marais-2">Aucun avis disponible</span></p>
    </div>
    </div>
    <div class="animal-card" id="animal-marais-3" onclick="incrementCounter('marais', '3')">
        <img src="/assets/image/alligatormarais.webp" alt="Alligator des Marais">
        <p>Nom: Alligator des Marais</p>
        <p>Race: Alligator</p>
        <p>Habitat: Marais</p>
        <p>Consultations: <span id="counter-marais-3">0</span></p>
        <p><strong>Avis du Vétérinaire :</strong> <span id="avis-marais-3">Aucun avis disponible</span></p>
    </div>
    </div>
    <div class="animal-card" id="animal-marais-4" onclick="incrementCounter('marais', '4')">
        <img src="/assets/image/aigrette_marais.jpg" alt="Aigrette des Marais">
        <p>Nom: Aigrette des Marais</p>
        <p>Race: Aigrette</p>
        <p>Habitat: Marais</p>
        <p>Consultations: <span id="counter-marais-4">0</span></p>
        <p><strong>Avis du Vétérinaire :</strong> <span id="avis-marais-4">Aucun avis disponible</span></p>
    </div>
    </div>
</div>

<!-- Savane -->
<div class="habitat">
    <h2>Savane</h2>
    <div class="animal-card" id="animal-savane-1" onclick="incrementCounter('savane', '1')">
        <img src="/assets/image/lion-savane.jpg" alt="Lion de la savane">
        <p>Nom: Lion</p>
        <p>Race: Lion</p>
        <p>Habitat: Savane</p>
        <p>Consultations: <span id="counter-savane-1">0</span></p>
        <p><strong>Avis du Vétérinaire :</strong> <span id="avis-savane-1">Aucun avis disponible</span></p>
    </div>
    </div>
    <div class="animal-card" id="animal-savane-2" onclick="incrementCounter('savane', '2')">
        <img src="/assets/image/buffalo-savane.jpg" alt="Buffalo de la Savane">
        <p>Nom: Billy</p>
        <p>Race: Buffalo</p>
        <p>Habitat: Savane</p>
        <p>Consultations: <span id="counter-savane-2">0</span></p>
        <p><strong>Avis du Vétérinaire :</strong> <span id="avis-savane-2">Aucun avis disponible</span></p>
    </div>
    </div>
    <div class="animal-card" id="animal-savane-3" onclick="incrementCounter('savane', '3')">
        <img src="/assets/image/1000012057.jpg" alt="Giraffe de la Savane">
        <p>Nom: Gigi</p>
        <p>Race: Giraffe</p>
        <p>Habitat: Savane</p>
        <p>Consultations: <span id="counter-savane-3">0</span></p>
        <p><strong>Avis du Vétérinaire :</strong> <span id="avis-savane-3">Aucun avis disponible</span></p>
   
    </div>
     <div class="animal-card" id="animal-savane-4" onclick="incrementCounter('savane', '4')">
        <img src="/assets/image/oryxsavane.jpg" alt="Oryx de la Savane">
        <p>Nom: Ory</p>
        <p>Race: Oryx</p>
        <p>Habitat: Savane</p>
        <p>Consultations: <span id="counter-savane-4">0</span></p>
        <p><strong>Avis du Vétérinaire :</strong> <span id="avis-savane-4">Aucun avis disponible</span></p>
  
    </div>
    <div class="animal-card" id="animal-savane-5" onclick="incrementCounter('savane', '5')">
        <img src="/assets/image/Suricatesavane.jpg" alt="Suricate de la Savane">
        <p>Nom: Surri</p>
        <p>Race: Suricate</p>
        <p>Habitat: Savane</p>
        <p>Consultations: <span id="counter-savane-5">0</span></p>
        <p><strong>Avis du Vétérinaire :</strong> <span id="avis-savane-5">Aucun avis disponible</span></p>
   
    </div>
    <div class="animal-card" id="animal-savane-6" onclick="incrementCounter('savane', '6')">
        <img src="/assets/image/zebrasavane.jpg" alt="Zèbre de la Savane">
        <p>Nom: Zara</p>
        <p>Race: Zèbre</p>
        <p>Habitat: Savane</p>
        <p>Consultations: <span id="counter-savane-6">0</span></p>
        <p><strong>Avis du Vétérinaire :</strong> <span id="avis-savane-6">Aucun avis disponible</span></p>
   
    </div>
</div>

<!-- Jungle -->
<div class="habitat">
    <h2>Jungle</h2>
    <div class="animal-card" id="animal-jungle-1" onclick="incrementCounter('jungle', '1')">
        <img src="/assets/image/lizard-jungle.jpg" alt="Lézard de la Jungle">
        <p>Nom: Lazy</p>
        <p>Race: Lézard</p>
        <p>Habitat: Jungle</p>
        <p>Consultations: <span id="counter-jungle-1">0</span></p>
        <p><strong>Avis du Vétérinaire :</strong> <span id="avis-jungle-1">Aucun avis disponible</span></p>
    </div>
    
    <div class="animal-card" id="animal-jungle-2" onclick="incrementCounter('jungle', '2')">
        <img src="/assets/image/tigers-jungle.jpg" alt="Tigre de la Jungle">
        <p>Nom: Tiger</p>
        <p>Race: Tigre</p>
        <p>Habitat: Jungle</p>
        <p>Consultations: <span id="counter-jungle-2">0</span></p>
        <p><strong>Avis du Vétérinaire :</strong> <span id="avis-jungle-2">Aucun avis disponible</span></p>
    </div>
   
    <div class="animal-card" id="animal-jungle-3" onclick="incrementCounter('jungle', '3')">
        <img src="/assets/image/toucan-jungle.jpg" alt="Toucan de la Jungle">
        <p>Nom: Taucan</p>
        <p>Race: Toucan</p>
        <p>Habitat: Jungle</p>
    <p>Consultations: <span id="counter-jungle-3">0</span></p>
    <p><strong>Avis du Vétérinaire :</strong> <span id="avis-jungle-3">Aucun avis disponible</span></p>
</div>
    </div>
    <div class="animal-card" id="animal-jungle-4" onclick="incrementCounter('jungle', '4')">
        <img src="/assets/image/Serpent,pythonjungle.jpg" alt="Python de la Jungle">
        <p>Nom: Python</p>
        <p>Race: Serpent</p>
        <p>Habitat: Jungle</p>
        <p>Consultations: <span id="counter-jungle-4">0</span></p>
        <p><strong>Avis du Vétérinaire :</strong> <span id="avis-jungle-4">Aucun avis disponible</span></p>
    </div>
    </div>
</div>

<footer>
    <p>&copy; 2024 Zoo Arcadia. Tous droits réservés.</p>
</footer>

<!-- JavaScript pour incrémenter le compteur -->
<script>
    function incrementCounter(habitat, animalId) {
        // Récupérer le compteur actuel depuis le span correspondant
        var counterSpan = document.getElementById("counter-" + habitat + "-" + animalId);
        var currentCount = parseInt(counterSpan.innerText);

        // Incrémenter le compteur et l'afficher
        var newCount = currentCount + 1;
        counterSpan.innerText = newCount;

        // Enregistrer l'incrémentation dans la base de données NoSQL
        saveToDatabase(habitat, animalId, newCount);
    }

    function saveToDatabase(habitat, animalId, newCount) {
        // Créer un objet avec les données à envoyer
        var data = {
            animalId: animalId,  // L'ID réel de l'animal
        incrementCount: count,
        lastIncrementDate: new Date().toISOString()  // Date actuelle
        };

        function saveToDatabase(habitat, animalId, newCount) {
  // Créer un objet avec les données à envoyer
  const data = {
    animalId: animalId,
    incrementCount: newCount,
    lastIncrementDate: new Date().toISOString()  // Date actuelle
  };

  // Envoyer les données à l'API
  fetch('http://localhost:3009/api/animalIncrements', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(data),
  })
  .then((response) => response.json())
  .then((result) => {
    console.log('Données sauvegardées:', result);
    updateDashboard(habitat, animalId, newCount);
  })
  .catch((error) => {
    console.error('Erreur lors de la sauvegarde:', error);
  });
</script>
</body>
</html>  